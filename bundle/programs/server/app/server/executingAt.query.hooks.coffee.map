{"version":3,"sources":["meteor://ðŸ’»app/server/executingAt.query.hooks.coffee"],"names":["indexOf","share","Queries","before","update","userId","query","fieldNames","modifier","options","$set","_","has","executingInterval","executingAt","Date","getTime","after","skipResetTimeout","call","periodicExecution","resetTimeout"],"mappings":";;;;;;;;;AAAA,IAAAA,OAAA,MAAAA,OAAA;AAAAC,KAAK,CAACC,OAAN,CAAcC,MAAd,CAAqBC,MAArB,CAA4B,UAACC,MAAD,EAASC,KAAT,EAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,OAAtC;AAC1B,MAAGD,QAAQ,CAACE,IAAZ;AACE,QAAGC,CAAC,CAACC,GAAF,CAAMJ,QAAQ,CAACE,IAAf,EAAqB,mBAArB,CAAH;AACE,UAAGF,QAAQ,CAACE,IAAT,CAAcG,iBAAjB;AAGE,eAFAL,QAAQ,CAACE,IAAT,CAAcI,WAAd,GAA4B,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuBR,QAAQ,CAACE,IAAT,CAAcG,iBAA9C,CAE5B;AAHF;AAKE,eAFAL,QAAQ,CAACE,IAAT,CAAcI,WAAd,GAA4B,IAE5B;AANJ;AADF;AAUC;AAXH;AAQAb,KAAK,CAACC,OAAN,CAAce,KAAd,CAAoBb,MAApB,CAA2B,UAACC,MAAD,EAASC,KAAT,EAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,OAAtC;AACzB,MAAGA,OAAO,CAACS,gBAAX;AACE;AAOD;;AAND,MAAGlB,OAAA,CAAAmB,IAAA,CAAiBZ,UAAjB,yBAAgCD,KAAK,CAACQ,WAAzC;AAQE,WAPAb,KAAK,CAACmB,iBAAN,CAAwBC,YAAxB,EAOA;AACD;AAZH,G","file":"/server/executingAt.query.hooks.coffee","sourcesContent":["share.Queries.before.update (userId, query, fieldNames, modifier, options) ->\n  if modifier.$set\n    if _.has(modifier.$set, \"executingInterval\")\n      if modifier.$set.executingInterval\n        modifier.$set.executingAt = new Date(new Date().getTime() + modifier.$set.executingInterval)\n      else\n        modifier.$set.executingAt = null\n\nshare.Queries.after.update (userId, query, fieldNames, modifier, options) ->\n  if options.skipResetTimeout\n    return\n  if \"executingAt\" in fieldNames and query.executingAt\n    share.periodicExecution.resetTimeout()"]}