(function(){

/////////////////////////////////////////////////////////////////////////
//                                                                     //
// server/fixtures.coffee                                              //
//                                                                     //
/////////////////////////////////////////////////////////////////////////
                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;
var insertData,
    indexOf = [].indexOf;
share.fixtureIds = [];

insertData = function (data, collection) {
  var _id, object;

  for (_id in data) {
    if (indexOf.call(share.fixtureIds, _id) < 0) {
      share.fixtureIds.push(_id);
    }
  }

  if (collection.find().count() === 0) {
    for (_id in data) {
      object = data[_id];
      object._id = _id;
      object.isNew = false;
      collection.insert(object);
    }

    return true;
  }
};

share.loadFixtures = function () {
  if (Meteor.settings.isLoadingFixtures) {
    return share.loadFixturesForCompleteSetup();
  } else {
    return share.loadFixturesForIncompleteSetup();
  }
};

share.loadFixturesForCompleteSetup = function () {
  var _id, configs, executingInterval, ipsets, lastWeek, now, queries, query, user, users, usersInserted;

  now = new Date();
  lastWeek = new Date(now.getTime() - 7 * 24 * 3600 * 1000);
  configs = {
    Default: {
      isSetupComplete: true,
      isSSH: true,
      host: "50.116.29.253",
      port: "22",
      user: "denis",
      identityFile: "",
      siteConfigFile: "/usr/local/etc/silk.conf",
      dataRootdir: "/data",
      dataTempdir: "/tmp"
    }
  };
  insertData(configs, share.Configs);
  users = {
    ChrisSanders: {
      profile: {
        name: "Chris Sanders"
      },
      //        timezone: 240 # US, Charleston
      group: "admin"
    },
    DenisGorbachev: {
      profile: {
        name: "Denis Gorbachev"
      },
      //        timezone: -240 # Russia, Moscow
      group: "admin"
    }
  };

  for (_id in users) {
    user = users[_id];

    _.defaults(user, {
      emails: [{
        address: _id.toLowerCase() + "@flowbat.com",
        verified: true
      }],
      services: {
        resume: {
          loginTokens: [{
            "hashedToken": Accounts._hashLoginToken(_id),
            "when": now
          }]
        }
      },
      createdAt: lastWeek
    });
  }

  usersInserted = insertData(users, Meteor.users);

  if (usersInserted) {
    for (_id in users) {
      user = users[_id];
      Accounts.setPassword(_id, "123123");
    }
  }

  queries = {
    Dashboard1: {
      name: "Dashboard query",
      cmd: "--sensor=S0 --type=all --sport=80",
      exclusionsCmd: "--daddress=192.168.0.1 OR --scc=au",
      sportEnabled: true,
      sport: "80",
      ownerId: "ChrisSanders"
    },
    RwstatsTest: {
      name: "Rwstats query",
      interface: "builder",
      cmd: "--sensor=S0 --type=all --sport=80",
      sportEnabled: true,
      sport: "80",
      output: "rwstats",
      rwstatsFields: ["sIP"],
      rwstatsValues: ["Records", "dIP", "dPort"],
      ownerId: "ChrisSanders"
    },
    RwcountTest: {
      name: "Rwcount query",
      interface: "builder",
      cmd: "--sensor=S0 --type=all --sport=80",
      sportEnabled: true,
      sport: "80",
      output: "rwcount",
      rwcountBinSizeEnabled: true,
      rwcountBinSize: "10",
      rwcountLoadSchemeEnabled: true,
      rwcountLoadScheme: "0",
      ownerId: "ChrisSanders"
    }
  };

  for (_id in queries) {
    query = queries[_id];

    _.extend(query, {
      startDateEnabled: false,
      startDate: ""
    });
  }

  for (_id in queries) {
    if (indexOf.call(share.fixtureIds, _id) < 0) {
      share.fixtureIds.push(_id);
    }
  }

  if (share.Queries.find().count() === 0) {
    for (_id in queries) {
      query = queries[_id];
      query._id = _id;
      query.isNew = false;
      _id = share.Queries.insert(query);
      query = share.Queries.findOne(_id);
      share.Queries.update(_id, {
        $set: {
          isOutputStale: true
        }
      });
    }

    executingInterval = 5 * share.minute; //    executingInterval /= 5 * 12 # debug

    share.Queries.update("Dashboard1", {
      $set: {
        executingInterval: executingInterval
      }
    });
    Meteor.users.update("ChrisSanders", {
      $set: {
        "profile.dashboardQueryIds": ["Dashboard1"]
      }
    });
  }

  ipsets = {
    Local: {
      name: "Local addresses",
      note: "John asked to create this",
      contents: "192.168.0.1\n192.168.0.2\n192.168.0.3",
      ownerId: "ChrisSanders"
    },
    DNS: {
      name: "DNS addresses",
      note: "For testing purposes",
      contents: "8.8.8.8\n8.8.4.4\n208.67.222.222\n208.67.220.220",
      ownerId: "ChrisSanders"
    }
  };
  return insertData(ipsets, share.IPSets);
}; //  serviceConfigurations = {}
//  insertData(serviceConfigurations, ServiceConfiguration.configurations)


share.loadFixturesForIncompleteSetup = function () {
  var configs;
  configs = {
    Default: {
      isSetupComplete: false
    }
  };
  return insertData(configs, share.Configs);
};
/////////////////////////////////////////////////////////////////////////

}).call(this);

//# sourceURL=meteor://ðŸ’»app/app/server/fixtures.coffee
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGVvcjovL/CfkrthcHAvc2VydmVyL2ZpeHR1cmVzLmNvZmZlZSJdLCJuYW1lcyI6WyJpbnNlcnREYXRhIiwiaW5kZXhPZiIsInNoYXJlIiwiZml4dHVyZUlkcyIsImRhdGEiLCJjb2xsZWN0aW9uIiwiX2lkIiwib2JqZWN0IiwiY2FsbCIsInB1c2giLCJmaW5kIiwiY291bnQiLCJpc05ldyIsImluc2VydCIsImxvYWRGaXh0dXJlcyIsIk1ldGVvciIsInNldHRpbmdzIiwiaXNMb2FkaW5nRml4dHVyZXMiLCJsb2FkRml4dHVyZXNGb3JDb21wbGV0ZVNldHVwIiwibG9hZEZpeHR1cmVzRm9ySW5jb21wbGV0ZVNldHVwIiwiY29uZmlncyIsImV4ZWN1dGluZ0ludGVydmFsIiwiaXBzZXRzIiwibGFzdFdlZWsiLCJub3ciLCJxdWVyaWVzIiwicXVlcnkiLCJ1c2VyIiwidXNlcnMiLCJ1c2Vyc0luc2VydGVkIiwiRGF0ZSIsImdldFRpbWUiLCJEZWZhdWx0IiwiaXNTZXR1cENvbXBsZXRlIiwiaXNTU0giLCJob3N0IiwicG9ydCIsImlkZW50aXR5RmlsZSIsInNpdGVDb25maWdGaWxlIiwiZGF0YVJvb3RkaXIiLCJkYXRhVGVtcGRpciIsIkNvbmZpZ3MiLCJDaHJpc1NhbmRlcnMiLCJwcm9maWxlIiwibmFtZSIsImdyb3VwIiwiRGVuaXNHb3JiYWNoZXYiLCJfIiwiZGVmYXVsdHMiLCJlbWFpbHMiLCJhZGRyZXNzIiwidG9Mb3dlckNhc2UiLCJ2ZXJpZmllZCIsInNlcnZpY2VzIiwicmVzdW1lIiwibG9naW5Ub2tlbnMiLCJBY2NvdW50cyIsIl9oYXNoTG9naW5Ub2tlbiIsImNyZWF0ZWRBdCIsInNldFBhc3N3b3JkIiwiRGFzaGJvYXJkMSIsImNtZCIsImV4Y2x1c2lvbnNDbWQiLCJzcG9ydEVuYWJsZWQiLCJzcG9ydCIsIm93bmVySWQiLCJSd3N0YXRzVGVzdCIsImludGVyZmFjZSIsIm91dHB1dCIsInJ3c3RhdHNGaWVsZHMiLCJyd3N0YXRzVmFsdWVzIiwiUndjb3VudFRlc3QiLCJyd2NvdW50QmluU2l6ZUVuYWJsZWQiLCJyd2NvdW50QmluU2l6ZSIsInJ3Y291bnRMb2FkU2NoZW1lRW5hYmxlZCIsInJ3Y291bnRMb2FkU2NoZW1lIiwiZXh0ZW5kIiwic3RhcnREYXRlRW5hYmxlZCIsInN0YXJ0RGF0ZSIsIlF1ZXJpZXMiLCJmaW5kT25lIiwidXBkYXRlIiwiJHNldCIsImlzT3V0cHV0U3RhbGUiLCJtaW51dGUiLCJMb2NhbCIsIm5vdGUiLCJjb250ZW50cyIsIkROUyIsIklQU2V0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsSUFBQUEsVUFBQTtBQUFBLElBQUFDLE9BQUEsTUFBQUEsT0FBQTtBQUFBQyxLQUFLLENBQUNDLFVBQU4sR0FBbUIsRUFBbkI7O0FBRUFILFVBQUEsR0FBYSxVQUFDSSxJQUFELEVBQU9DLFVBQVA7QUFDWCxNQUFBQyxHQUFBLEVBQUFDLE1BQUE7O0FBQUEsT0FBQUQsR0FBQSxJQUFBRixJQUFBO0FBS0UsUUFMbUJILE9BQUEsQ0FBQU8sSUFBQSxDQUFXTixLQUFLLENBQUNDLFVBQWpCLEVBQUFHLEdBQUEsS0FLbkIsRUFMbUI7QUFDbkJKLFdBQUssQ0FBQ0MsVUFBTixDQUFpQk0sSUFBakIsQ0FBc0JILEdBQXRCO0FBTUM7QUFQSDs7QUFFQSxNQUFHRCxVQUFVLENBQUNLLElBQVgsR0FBa0JDLEtBQWxCLE9BQTZCLENBQWhDO0FBQ0UsU0FBQUwsR0FBQSxJQUFBRixJQUFBO0FBUUVHLFlBQU0sR0FBR0gsSUFBSSxDQUFDRSxHQUFELENBQWI7QUFQQUMsWUFBTSxDQUFDRCxHQUFQLEdBQWFBLEdBQWI7QUFDQUMsWUFBTSxDQUFDSyxLQUFQLEdBQWUsS0FBZjtBQUNBUCxnQkFBVSxDQUFDUSxNQUFYLENBQWtCTixNQUFsQjtBQUhGOztBQUlBLFdBQU8sSUFBUDtBQVVEO0FBbEJVLENBQWI7O0FBVUFMLEtBQUssQ0FBQ1ksWUFBTixHQUFxQjtBQUNuQixNQUFHQyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLGlCQUFuQjtB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QU4sR0FBdUM7QUFDckMsTUFBQUMsT0FBQTtBQUFBQSxTQUFBLEdBQ0U7QUFBQVksV0FBQSxFQUNFO0FBQUFDLHFCQUFBLEVBQWlCO0FBQWpCO0FBREYsR0FERjtBQStDQSxTQTVDQWpDLFVBQUEsQ0FBV29CLE9BQVgsRUFBb0JsQixLQUFLLENBQUN1QyxPQUExQixDQTRDQTtBQWhEcUMsQ0FBdkMsQyIsImZpbGUiOiIvc2VydmVyL2ZpeHR1cmVzLmNvZmZlZSIsInNvdXJjZXNDb250ZW50IjpbInNoYXJlLmZpeHR1cmVJZHMgPSBbXVxuXG5pbnNlcnREYXRhID0gKGRhdGEsIGNvbGxlY3Rpb24pIC0+XG4gIGZvciBfaWQgb2YgZGF0YSB3aGVuIF9pZCBub3QgaW4gc2hhcmUuZml4dHVyZUlkc1xuICAgIHNoYXJlLmZpeHR1cmVJZHMucHVzaChfaWQpXG4gIGlmIGNvbGxlY3Rpb24uZmluZCgpLmNvdW50KCkgaXMgMFxuICAgIGZvciBfaWQsIG9iamVjdCBvZiBkYXRhXG4gICAgICBvYmplY3QuX2lkID0gX2lkXG4gICAgICBvYmplY3QuaXNOZXcgPSBmYWxzZVxuICAgICAgY29sbGVjdGlvbi5pbnNlcnQob2JqZWN0KVxuICAgIHJldHVybiB0cnVlXG5cbnNoYXJlLmxvYWRGaXh0dXJlcyA9IC0+XG4gIGlmIE1ldGVvci5zZXR0aW5ncy5pc0xvYWRpbmdGaXh0dXJlc1xuICAgIHNoYXJlLmxvYWRGaXh0dXJlc0ZvckNvbXBsZXRlU2V0dXAoKVxuICBlbHNlXG4gICAgc2hhcmUubG9hZEZpeHR1cmVzRm9ySW5jb21wbGV0ZVNldHVwKClcblxuc2hhcmUubG9hZEZpeHR1cmVzRm9yQ29tcGxldGVTZXR1cCA9IC0+XG4gIG5vdyA9IG5ldyBEYXRlKClcbiAgbGFzdFdlZWsgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gNyAqIDI0ICogMzYwMCAqIDEwMDApXG5cbiAgY29uZmlncyA9XG4gICAgRGVmYXVsdDpcbiAgICAgIGlzU2V0dXBDb21wbGV0ZTogdHJ1ZVxuICAgICAgaXNTU0g6IHRydWVcbiAgICAgIGhvc3Q6IFwiNTAuMTE2LjI5LjI1M1wiXG4gICAgICBwb3J0OiBcIjIyXCJcbiAgICAgIHVzZXI6IFwiZGVuaXNcIlxuICAgICAgaWRlbnRpdHlGaWxlOiBcIlwiXG4gICAgICBzaXRlQ29uZmlnRmlsZTogXCIvdXNyL2xvY2FsL2V0Yy9zaWxrLmNvbmZcIlxuICAgICAgZGF0YVJvb3RkaXI6IFwiL2RhdGFcIlxuICAgICAgZGF0YVRlbXBkaXI6IFwiL3RtcFwiXG4gIGluc2VydERhdGEoY29uZmlncywgc2hhcmUuQ29uZmlncylcblxuICB1c2VycyA9XG4gICAgQ2hyaXNTYW5kZXJzOlxuICAgICAgcHJvZmlsZTpcbiAgICAgICAgbmFtZTogXCJDaHJpcyBTYW5kZXJzXCJcbiMgICAgICAgIHRpbWV6b25lOiAyNDAgIyBVUywgQ2hhcmxlc3RvblxuICAgICAgZ3JvdXA6IFwiYWRtaW5cIlxuICAgIERlbmlzR29yYmFjaGV2OlxuICAgICAgcHJvZmlsZTpcbiAgICAgICAgbmFtZTogXCJEZW5pcyBHb3JiYWNoZXZcIlxuIyAgICAgICAgdGltZXpvbmU6IC0yNDAgIyBSdXNzaWEsIE1vc2Nvd1xuICAgICAgZ3JvdXA6IFwiYWRtaW5cIlxuICBmb3IgX2lkLCB1c2VyIG9mIHVzZXJzXG4gICAgXy5kZWZhdWx0cyh1c2VyLFxuICAgICAgZW1haWxzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBhZGRyZXNzOiBfaWQudG9Mb3dlckNhc2UoKSArIFwiQGZsb3diYXQuY29tXCJcbiAgICAgICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICBdXG4gICAgICBzZXJ2aWNlczpcbiAgICAgICAgcmVzdW1lOlxuICAgICAgICAgIGxvZ2luVG9rZW5zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwiaGFzaGVkVG9rZW5cIjogQWNjb3VudHMuX2hhc2hMb2dpblRva2VuKF9pZCksXG4gICAgICAgICAgICAgIFwid2hlblwiOiBub3dcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICBjcmVhdGVkQXQ6IGxhc3RXZWVrXG4gICAgKVxuICB1c2Vyc0luc2VydGVkID0gaW5zZXJ0RGF0YSh1c2VycywgTWV0ZW9yLnVzZXJzKVxuICBpZiB1c2Vyc0luc2VydGVkXG4gICAgZm9yIF9pZCwgdXNlciBvZiB1c2Vyc1xuICAgICAgQWNjb3VudHMuc2V0UGFzc3dvcmQoX2lkLCBcIjEyMzEyM1wiKVxuXG4gIHF1ZXJpZXMgPVxuICAgIERhc2hib2FyZDE6XG4gICAgICBuYW1lOiBcIkRhc2hib2FyZCBxdWVyeVwiXG4gICAgICBjbWQ6IFwiLS1zZW5zb3I9UzAgLS10eXBlPWFsbCAtLXNwb3J0PTgwXCJcbiAgICAgIGV4Y2x1c2lvbnNDbWQ6IFwiLS1kYWRkcmVzcz0xOTIuMTY4LjAuMSBPUiAtLXNjYz1hdVwiXG4gICAgICBzcG9ydEVuYWJsZWQ6IHRydWVcbiAgICAgIHNwb3J0OiBcIjgwXCJcbiAgICAgIG93bmVySWQ6IFwiQ2hyaXNTYW5kZXJzXCJcbiAgICBSd3N0YXRzVGVzdDpcbiAgICAgIG5hbWU6IFwiUndzdGF0cyBxdWVyeVwiXG4gICAgICBpbnRlcmZhY2U6IFwiYnVpbGRlclwiXG4gICAgICBjbWQ6IFwiLS1zZW5zb3I9UzAgLS10eXBlPWFsbCAtLXNwb3J0PTgwXCJcbiAgICAgIHNwb3J0RW5hYmxlZDogdHJ1ZVxuICAgICAgc3BvcnQ6IFwiODBcIlxuICAgICAgb3V0cHV0OiBcInJ3c3RhdHNcIlxuICAgICAgcndzdGF0c0ZpZWxkczogW1wic0lQXCJdXG4gICAgICByd3N0YXRzVmFsdWVzOiBbXCJSZWNvcmRzXCIsIFwiZElQXCIsIFwiZFBvcnRcIl1cbiAgICAgIG93bmVySWQ6IFwiQ2hyaXNTYW5kZXJzXCJcbiAgICBSd2NvdW50VGVzdDpcbiAgICAgIG5hbWU6IFwiUndjb3VudCBxdWVyeVwiXG4gICAgICBpbnRlcmZhY2U6IFwiYnVpbGRlclwiXG4gICAgICBjbWQ6IFwiLS1zZW5zb3I9UzAgLS10eXBlPWFsbCAtLXNwb3J0PTgwXCJcbiAgICAgIHNwb3J0RW5hYmxlZDogdHJ1ZVxuICAgICAgc3BvcnQ6IFwiODBcIlxuICAgICAgb3V0cHV0OiBcInJ3Y291bnRcIlxuICAgICAgcndjb3VudEJpblNpemVFbmFibGVkOiB0cnVlXG4gICAgICByd2NvdW50QmluU2l6ZTogXCIxMFwiXG4gICAgICByd2NvdW50TG9hZFNjaGVtZUVuYWJsZWQ6IHRydWVcbiAgICAgIHJ3Y291bnRMb2FkU2NoZW1lOiBcIjBcIlxuICAgICAgb3duZXJJZDogXCJDaHJpc1NhbmRlcnNcIlxuICBmb3IgX2lkLCBxdWVyeSBvZiBxdWVyaWVzXG4gICAgXy5leHRlbmQocXVlcnksXG4gICAgICBzdGFydERhdGVFbmFibGVkOiBmYWxzZVxuICAgICAgc3RhcnREYXRlOiBcIlwiXG4gICAgKVxuICBmb3IgX2lkIG9mIHF1ZXJpZXMgd2hlbiBfaWQgbm90IGluIHNoYXJlLmZpeHR1cmVJZHNcbiAgICBzaGFyZS5maXh0dXJlSWRzLnB1c2goX2lkKVxuICBpZiBzaGFyZS5RdWVyaWVzLmZpbmQoKS5jb3VudCgpIGlzIDBcbiAgICBmb3IgX2lkLCBxdWVyeSBvZiBxdWVyaWVzXG4gICAgICBxdWVyeS5faWQgPSBfaWRcbiAgICAgIHF1ZXJ5LmlzTmV3ID0gZmFsc2VcbiAgICAgIF9pZCA9IHNoYXJlLlF1ZXJpZXMuaW5zZXJ0KHF1ZXJ5KVxuICAgICAgcXVlcnkgPSBzaGFyZS5RdWVyaWVzLmZpbmRPbmUoX2lkKVxuICAgICAgc2hhcmUuUXVlcmllcy51cGRhdGUoX2lkLCB7JHNldDoge2lzT3V0cHV0U3RhbGU6IHRydWV9fSlcbiAgICBleGVjdXRpbmdJbnRlcnZhbCA9IDUgKiBzaGFyZS5taW51dGVcbiMgICAgZXhlY3V0aW5nSW50ZXJ2YWwgLz0gNSAqIDEyICMgZGVidWdcbiAgICBzaGFyZS5RdWVyaWVzLnVwZGF0ZShcIkRhc2hib2FyZDFcIiwgeyRzZXQ6IHtleGVjdXRpbmdJbnRlcnZhbDogZXhlY3V0aW5nSW50ZXJ2YWx9fSlcbiAgICBNZXRlb3IudXNlcnMudXBkYXRlKFwiQ2hyaXNTYW5kZXJzXCIsIHskc2V0OiB7XCJwcm9maWxlLmRhc2hib2FyZFF1ZXJ5SWRzXCI6IFtcIkRhc2hib2FyZDFcIl19fSlcblxuICBpcHNldHMgPVxuICAgIExvY2FsOlxuICAgICAgbmFtZTogXCJMb2NhbCBhZGRyZXNzZXNcIlxuICAgICAgbm90ZTogXCJKb2huIGFza2VkIHRvIGNyZWF0ZSB0aGlzXCJcbiAgICAgIGNvbnRlbnRzOiBcIlwiXCJcbiAgICAgICAgMTkyLjE2OC4wLjFcbiAgICAgICAgMTkyLjE2OC4wLjJcbiAgICAgICAgMTkyLjE2OC4wLjNcbiAgICAgIFwiXCJcIlxuICAgICAgb3duZXJJZDogXCJDaHJpc1NhbmRlcnNcIlxuICAgIEROUzpcbiAgICAgIG5hbWU6IFwiRE5TIGFkZHJlc3Nlc1wiXG4gICAgICBub3RlOiBcIkZvciB0ZXN0aW5nIHB1cnBvc2VzXCJcbiAgICAgIGNvbnRlbnRzOiBcIlwiXCJcbiAgICAgICAgOC44LjguOFxuICAgICAgICA4LjguNC40XG4gICAgICAgIDIwOC42Ny4yMjIuMjIyXG4gICAgICAgIDIwOC42Ny4yMjAuMjIwXG4gICAgICBcIlwiXCJcbiAgICAgIG93bmVySWQ6IFwiQ2hyaXNTYW5kZXJzXCJcbiAgaW5zZXJ0RGF0YShpcHNldHMsIHNoYXJlLklQU2V0cylcblxuXG4jICBzZXJ2aWNlQ29uZmlndXJhdGlvbnMgPSB7fVxuIyAgaW5zZXJ0RGF0YShzZXJ2aWNlQ29uZmlndXJhdGlvbnMsIFNlcnZpY2VDb25maWd1cmF0aW9uLmNvbmZpZ3VyYXRpb25zKVxuXG5zaGFyZS5sb2FkRml4dHVyZXNGb3JJbmNvbXBsZXRlU2V0dXAgPSAtPlxuICBjb25maWdzID1cbiAgICBEZWZhdWx0OlxuICAgICAgaXNTZXR1cENvbXBsZXRlOiBmYWxzZVxuICBpbnNlcnREYXRhKGNvbmZpZ3MsIHNoYXJlLkNvbmZpZ3MpXG4iXX0=
