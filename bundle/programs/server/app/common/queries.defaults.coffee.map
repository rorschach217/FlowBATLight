{"version":3,"sources":["meteor://ðŸ’»app/common/queries.defaults.coffee"],"names":["queryPreSave","userId","changes","share","Queries","before","insert","query","count","now","prefix","startDate","_id","Random","id","Date","moment","utc","format","_","defaults","name","cmd","exclusionsCmd","startDateType","startDateOffsetEnabled","startDateOffset","startDateEnabled","endDateEnabled","endDate","sensorEnabled","sensor","typesEnabled","types","daddressEnabled","daddress","saddressEnabled","saddress","anyAddressEnabled","anyAddress","dipSetEnabled","dipSet","sipSetEnabled","sipSet","anySetEnabled","anySet","tupleFileEnabled","tupleFile","tupleDirectionEnabled","tupleDirection","tupleDelimiterEnabled","tupleDelimiter","tupleFieldsEnabled","tupleFields","dportEnabled","dport","sportEnabled","sport","aportEnabled","aport","dccEnabled","dcc","sccEnabled","scc","protocolEnabled","protocol","flagsAllEnabled","flagsAll","activeTimeEnabled","activeTime","additionalParametersEnabled","additionalParameters","additionalExclusionsCmdEnabled","additionalExclusionsCmd","fields","fieldsOrder","clone","rwcutFields","rwstatsDirection","rwstatsMode","rwstatsCountModeValue","rwstatsThresholdModeValue","rwstatsPercentageModeValue","rwstatsBinTimeEnabled","rwstatsBinTime","rwstatsFields","rwstatsFieldsOrder","rwstatsValues","rwstatsValuesOrder","concat","rwstatsPrimaryValue","rwstatsCmd","rwcountBinSizeEnabled","rwcountBinSize","rwcountLoadSchemeEnabled","rwcountLoadScheme","rwcountSkipZeroes","rwcountFields","rwcountCmd","interface","output","presentation","chartType","chartHeight","expandedFieldsets","executingInterval","executingAt","isInputStale","isOutputStale","isUTC","isQuick","isNew","ownerId","updatedAt","createdAt","queryBlankValues","queryResetValues","find","$regex","$options","call","update","fieldNames","modifier","options","$set","result","error","startRecNum","sortField","sortReverse","chartHiddenFields"],"mappings":"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","file":"/common/queries.defaults.coffee","sourcesContent":["queryPreSave = (userId, changes) ->\n\nshare.Queries.before.insert (userId, query) ->\n  query._id = query._id || Random.id()\n  now = new Date()\n  startDate = moment.utc().format(\"YYYY/MM/DD:HH\")\n  _.defaults(query,\n    name: \"\"\n    cmd: \"\"\n    exclusionsCmd: \"\"\n    startDateType: \"interval\"\n    startDateOffsetEnabled: false\n    startDateOffset: \"60\"\n    startDateEnabled: true\n    startDate: startDate\n    endDateEnabled: false\n    endDate: \"\"\n    sensorEnabled: false\n    sensor: \"\"\n    typesEnabled: false\n    types: []\n    daddressEnabled: false\n    daddress: \"\"\n    saddressEnabled: false\n    saddress: \"\"\n    anyAddressEnabled: false\n    anyAddress: \"\"\n    dipSetEnabled: false\n    dipSet: null\n    sipSetEnabled: false\n    sipSet: null\n    anySetEnabled: false\n    anySet: null\n    tupleFileEnabled: false\n    tupleFile: null\n    tupleDirectionEnabled: false\n    tupleDirection: \"\"\n    tupleDelimiterEnabled: false\n    tupleDelimiter: \"\"\n    tupleFieldsEnabled: false\n    tupleFields: \"\"\n    dportEnabled: false\n    dport: \"\"\n    sportEnabled: false\n    sport: \"\"\n    aportEnabled: false\n    aport: \"\"\n    dccEnabled: false\n    dcc: []\n    sccEnabled: false\n    scc: []\n    protocolEnabled: true\n    protocol: \"0-255\"\n    flagsAllEnabled: false\n    flagsAll: \"\"\n    activeTimeEnabled: false\n    activeTime: \"\"\n    additionalParametersEnabled: false\n    additionalParameters: \"\"\n    additionalExclusionsCmdEnabled: false\n    additionalExclusionsCmd: \"\"\n    fields: [\"sIP\", \"dIP\", \"sPort\", \"dPort\", \"protocol\", \"packets\", \"bytes\", \"flags\", \"sTime\", \"duration\", \"eTime\", \"sensor\"]\n    fieldsOrder: _.clone(share.rwcutFields)\n    rwstatsDirection: \"top\"\n    rwstatsMode: \"count\"\n    rwstatsCountModeValue: \"10\"\n    rwstatsThresholdModeValue: \"\"\n    rwstatsPercentageModeValue: \"\"\n    rwstatsBinTimeEnabled: false\n    rwstatsBinTime: \"60\"\n    rwstatsFields: []\n    rwstatsFieldsOrder: _.clone(share.rwcutFields)\n    rwstatsValues: []\n    rwstatsValuesOrder: share.rwstatsValues.concat(share.rwcutFields)\n    rwstatsPrimaryValue: \"\"\n    rwstatsCmd: \"\"\n    rwcountBinSizeEnabled: false\n    rwcountBinSize: \"\"\n    rwcountLoadSchemeEnabled: false\n    rwcountLoadScheme: \"\"\n    rwcountSkipZeroes: true\n    rwcountFields: _.clone(share.rwcountFields)\n    rwcountCmd: \"\"\n    interface: \"cmd\"\n    output: \"rwcut\"\n    presentation: \"table\"\n    chartType: \"LineChart\"\n    chartHeight: 400\n    expandedFieldsets: [\"time\"]\n    executingInterval: 0\n    executingAt: null\n    isInputStale: false\n    isOutputStale: false\n    isUTC: true\n    isQuick: false\n    isNew: true\n    ownerId: userId\n    updatedAt: now\n    createdAt: now\n  , share.queryBlankValues, share.queryResetValues)\n  if not query.name\n    prefix = \"New query\"\n    count = share.Queries.find({ name: { $regex: \"^\" + prefix, $options: \"i\" } }).count()\n    query.name = prefix\n    if count\n      query.name += \" (\" + count + \")\"\n  queryPreSave.call(@, userId, query)\n\nshare.Queries.before.update (userId, query, fieldNames, modifier, options) ->\n  now = new Date()\n  modifier.$set = modifier.$set or {}\n  modifier.$set.updatedAt = modifier.$set.updatedAt or now\n  queryPreSave.call(@, userId, modifier.$set)\n\nshare.queryBlankValues =\n  result: \"\"\n  error: \"\"\n\nshare.queryResetValues =\n  startRecNum: 1\n  sortField: \"\"\n  sortReverse: true\n  chartHiddenFields: []\n"]}