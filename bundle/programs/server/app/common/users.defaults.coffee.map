{"version":3,"sources":["meteor://ðŸ’»app/common/users.defaults.coffee"],"names":["getInitials","userPreSave","name","firstLetters","firstWords","_","first","replace","trim","split","length","substring","map","word","charAt","join","toUpperCase","userId","changes","ref","profile","initials","Meteor","users","before","insert","user","defaults","isNew","isInvitation","invitations","numRecs","dashboardQueryIds","isRealName","call","update","fieldNames","modifier","options","$set"],"mappings":";;;;;;;;;AAAA,IAAAA,WAAA,EAAAC,WAAA;;AAAAD,WAAA,GAAc,UAACE,IAAD;AACZ,MAAAC,YAAA,EAAAC,UAAA;AAAAA,YAAA,GAAaC,CAAC,CAACC,KAAF,CAAQJ,IAAI,CAACK,OAAL,CAAa,MAAb,EAAqB,GAArB,EAA0BC,IAA1B,GAAiCC,KAAjC,CAAuC,GAAvC,CAAR,EAAqD,CAArD,CAAb;;AACA,MAAGL,UAAU,CAACM,MAAX,GAAoB,CAAvB;AACEP,gBAAA,GAAeC,UAAW,GAAX,CAAcO,SAAd,CAAwB,CAAxB,EAA2B,CAA3B,CAAf;AADF;AAGER,gBAAA,GAAeE,CAAC,CAACO,GAAF,CAAMR,UAAA,IAAc,EAApB,EAAwB,UAACS,IAAD;AAIrC,aAHAA,IAAI,CAACC,MAAL,CAAY,CAAZ,CAGA;AAJa,OACGC,IADH,CACQ,EADR,CAAf;AAMD;;AACD,SALAZ,YAAY,CAACa,WAAb,EAKA;AAZY,CAAd;;AASAf,WAAA,GAAc,UAACgB,MAAD,EAASC,OAAT;AACZ,MAAAC,GAAA;;AAAA,OAAAA,GAAA,GAAAD,OAAA,CAAAE,OAAA,YAAAD,GAAkB,CAAEjB,IAApB,GAAoB,MAApB;AACEgB,WAAO,CAACE,OAAR,CAAgBC,QAAhB,GAA2BrB,WAAA,CAAYkB,OAAO,CAACE,OAAR,CAAgBlB,IAA5B,CAA3B;AAQD;;AAPD,MAAGgB,OAAQ,gBAAX;AASE,WARAA,OAAQ,oBAAR,GAA8BlB,WAAA,CAAYkB,OAAQ,gBAApB,CAQ9B;AACD;AAbW,CAAd;;AAMAI,MAAM,CAACC,KAAP,CAAaC,MAAb,CAAoBC,MAApB,CAA2B,UAACR,MAAD,EAASS,IAAT;AACzBrB,GAAC,CAACsB,QAAF,CAAWD,IAAX,EACE;AAAAE,SAAA,EAAO,IAAP;AACAC,gBAAA,EAAc,KADd;AAEAC,eAAA,EAAa;AAFb,GADF;;AAKAzB,GAAC,CAACsB,QAAF,CAAWD,IAAI,CAACN,OAAhB,EACE;AAAAW,WAAA,EAAS,EAAT;AACAC,qBAAA,EAAmB,EADnB;AAEAC,cAAA,EAAY;AAFZ,GADF;;AAeA,SAVAhC,WAAW,CAACiC,IAAZ,CAAiB,IAAjB,EAAoBjB,MAApB,EAA4BS,IAA5B,CAUA;AArBF;AAaAJ,MAAM,CAACC,KAAP,CAAaC,MAAb,CAAoBW,MAApB,CAA2B,UAAClB,MAAD,EAASS,IAAT,EAAeU,UAAf,EAA2BC,QAA3B,EAAqCC,OAArC;AAYzB,SAXArC,WAAW,CAACiC,IAAZ,CAAiB,IAAjB,EAAoBjB,MAApB,EAA4BoB,QAAQ,CAACE,IAAT,IAAiB,EAA7C,CAWA;AAZF,G","file":"/common/users.defaults.coffee","sourcesContent":["getInitials = (name) ->\n  firstWords = _.first(name.replace(/\\s+/g, \" \").trim().split(\" \"), 2)\n  if firstWords.length < 2\n    firstLetters = firstWords[0].substring(0, 2)\n  else\n    firstLetters = _.map(firstWords || [], (word) ->\n      word.charAt(0)).join(\"\")\n  firstLetters.toUpperCase()\n\nuserPreSave = (userId, changes) ->\n  if changes.profile?.name\n    changes.profile.initials = getInitials(changes.profile.name)\n  if changes[\"profile.name\"]\n    changes[\"profile.initials\"] = getInitials(changes[\"profile.name\"])\n\nMeteor.users.before.insert (userId, user) ->\n  _.defaults(user,\n    isNew: true\n    isInvitation: false\n    invitations: []\n  )\n  _.defaults(user.profile,\n    numRecs: 10\n    dashboardQueryIds: []\n    isRealName: false\n  )\n  userPreSave.call(@, userId, user)\n\nMeteor.users.before.update (userId, user, fieldNames, modifier, options) ->\n  userPreSave.call(@, userId, modifier.$set || {})\n"]}